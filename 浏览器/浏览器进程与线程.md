# 浏览器进程与线程
浏览器采取多进程架构，可以使得运行时更加稳定健壮，并可以针对不同进程进行沙盒处理提高安全性。

### 浏览器主要包含的进程：
1. 浏览器进程：负责浏览器的界面（书签栏，前后退按钮，地址栏），文件访问，网络资源管理（下载），进程管理，标签页管理。
2. 渲染进程（浏览器内核）：控制选项卡的内容，每个窗口都分配了一个渲染进程。
3. GPU进程：在独立的进程中处理GPU任务，如3D绘制和硬件加速。处理来自多个应用的请求。
4. 插件进程：控制网站所使用的插件，每个插件使用时都会创建一个对应的进程。

### 渲染进程中的线程：
1. GUI渲染线程：负责渲染浏览器界面HTML元素，即渲染流程：解析，重排，重绘。
2. 定时触发器线程：为了防止JS引擎线程阻塞，所以用一个额外的线程处理定时任务保证计时准确。
3. 事件触发线程：当事件触发时将回调添加至处理队列尾部，等待JS引擎线程处理。
4. 异步http请求线程：处理http请求，检测到状态变更时，如果设置了回调函数，就会发送状态变更事件到JS引擎线程的处理队列中等待处理。
5. JavaScript引擎线程（JS内核）：负责处理JavaScript脚本程序，如解析执行JS代码。由于JS可以操纵DOM，为了避免修改元素属性时渲染出现数据不一致问题，GUI渲染线程和JS引擎线程是互斥关系，JS引擎执行时GUI线程会被挂起，GUI更新会被保存在队列中等待JS引擎线程空闲时立即执行。

### JavaScript为何设计为单线程
一开始被设计为浏览器脚本语言，为了避免多线程同时修改UI导致不一致问题。确保Web应用的稳定性和一致性，简化开发的复杂性。

### WebWorker
运行在子线程中，受主线程控制，不能操纵DOM。与JS引擎线程是内存隔离的，只能通postMessageAPI进行通信。

### 进程线程的区别
1. 进程是CPU进行资源分配的基本单位，线程是CPU调度的最小单位。
2. 两者都可以并发执行。
3. 进程拥有独立的地址空间，一个进程下的线程共享其内存。
4. 进程的创建撤销需要系统分配回收资源，开销更大。

### 进程间通信方式
1. 管道：半双工的通信方式。
2. 消息队列
3. 信号量：信号量是一个计数器，用来控制多个进程对共享资源的访问，常作为一种锁机制。
4. 文件共享
5. 共享内存：映射一段能被多个进程访问的内存，共享内存由一个进程创建。常配合信号量来实现进程间的同步。
6. Socket