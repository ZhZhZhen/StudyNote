# 启动优化
- 视觉优化
    - 点击应用时会显示空白的启动窗口，之后开始创应用进程。可以为该空白启动窗口设置图片，具体操作是为启动Activty设置主题windowBackground
    - 关于启动窗口：ActivityStack.startActivityLocked()，会判断是否要打开启动窗口从而调用showStartingWindow()方法。一个冷启动的App会打开启动窗口去检查首Activtiy的主题，并显示主题的图片(如果检测到透明主题就不会启动窗口)。这是一个没有触摸事件的fakeWindow.
- 代码优化
    - 需要启动的sdk可以分类：1、需要在主线程立刻启动。2、需要在主线程中启动，但是可以延迟。3、可以在子线程启动
    - 提前new SplashActivity和MainActivity。这样后续由ActivityThread启动这些类可以提前使用已经加载到方法区的资源
    - 对于MultiDex(4.4之前)，在Application.attachBaseContext()启动另外一个进程的Activity来加载MultiDex.install()。(主进程创建一个临时文件，然后开启另一个进程Activity，就循环该文件是否存在。另一个Activity加载完成后删除该文件，主进程的循环跳出)
- 其他
    - 根据命令adb shell am start查看
    - Actiivbty.onWindowFocus中记录启动结束时间